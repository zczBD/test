<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/echarts.js"></script>
    <script type="text/javascript" src="js/bmap.min.js"></script>
    <script type="text/javascript" src="js/lodash.js"></script>
    <script type="text/javascript" src="js/echarts-gl.js"></script>
    <script type="text/javascript" src="js/getscript.js"></script>
    <script type="text/javascript" src="js/ng-echarts.js"></script>
    <title></title>
</head>
<body>

<div id="pointChart" style="height: 600px;"></div>
<script type="text/javascript">
    var data = [

        {name: '合肥市政府', value: 20},
        {name: '合肥大剧院', value: 24},
        {name: '合肥市西园新村小学', value: 24},
        {name: '天鹅湖体育公园', value: 25},
        {name: '合家福超市', value: 25}

    ];
    var geoCoordMap = {
        "合肥市政府": [117.2322870000, 31.8266680000],
        "合肥大剧院": [117.2309210000, 31.8219130000],
        "合肥市西园新村小学": [117.2260340000, 31.8300120000],
        "天鹅湖体育公园": [117.2230880000, 31.8194580000],
        "合家福超市": [117.2240220000, 31.8209310000],
        "天鹅湖万达广场": [117.2307060000, 31.8250420000],
        "上铁银欣花园": [117.2077450000, 31.8271590000],
        "前城大厦": [117.2189200000, 31.8303190000]
    };

    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var geoCoord = geoCoordMap[data[i].name];
            if (geoCoord) {
                res.push({
                    name: data[i].name,
                    value: geoCoord.concat(data[i].value)
                });
            }
        }
        return res;
    };

    var em = document.getElementById("pointChart");
    var myChart = echarts.init(em, 'dark');
    var pointOption = {
        title: {
            text: '全国主要城市空气质量 - 百度地图',
            subtext: 'data from PM25.in',
            sublink: 'http://www.pm25.in',
            left: 'center'
        },
        tooltip: {
            trigger: 'item'
        },
        bmap: {
            center: [117.2354599503, 31.8268353637],
            zoom: 14,
            roam: true,
            mapStyle: {}
        },
        series: [
            {
                name: 'Top 5',
                type: 'effectScatter',
                coordinateSystem: 'bmap',
                data: convertData(data.sort(function (a, b) {
                    return b.value - a.value;
                }).slice(0, 6)),
                symbolSize: 20,
                showEffectOn: 'render',
                rippleEffect: {
                    brushType: 'stroke'
                },
                hoverAnimation: true,
                label: {
                    normal: {
                        formatter: '{b}',
                        position: 'right',
                        show: true
                    }
                },
                itemStyle: {
                    normal: {
                        color: 'red',
                        shadowBlur: 10,
                        shadowColor: '#333'
                    }
                },
                zlevel: 1
            }
        ]
    };
    myChart.setOption(pointOption);
</script>
</body>
</html>
