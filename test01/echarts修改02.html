<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/echarts.js"></script>
    <script type="text/javascript" src="js/bmap.min.js"></script>
    <script type="text/javascript" src="js/lodash.js"></script>
    <script type="text/javascript" src="js/echarts-gl.js"></script>
    <script type="text/javascript" src="js/getscript.js"></script>
    <script type="text/javascript" src="js/ng-echarts.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.11.0.js"></script>
    <title></title>
</head>
<body>

<div id="pointChart" style="height: 600px;"></div>
<script type="text/javascript">
    var unReformData = [
        {name: '天鹅湖万达广场', value: "已有停车标志：10; 已有停车栏：8; 区域停车辆：200"},

        {name: '上铁银欣花园', value: "已有停车标志：10;已有停车栏：8;区域停车辆：200"},
        {name: '前城大厦', value: "已有停车标志：10;已有停车栏：8;区域停车辆：200"}

    ];
    var reformData = [

        {name: '合肥市政府', value: "已有停车标志：10;已有停车栏：8; 区域停车辆：200"},
        {name: '合肥大剧院', value: "已有停车标志：10; 已有停车栏：8; 区域停车辆：200"},
        {name: '合肥市西园新村小学', value: "已有停车标志：10; 已有停车栏：8; 区域停车辆：200"},
        {name: '天鹅湖体育公园', value: "已有停车标志：10; 已有停车栏：8; 区域停车辆：200"},
        {name: '合家福超市', value: "已有停车标志：10; 已有停车栏：8; 区域停车辆：200"}

    ];
    var geoCoordMap = {
        "合肥市政府": [117.2322, 31.8266],
        "合肥大剧院": [117.2309, 31.8219],
        "合肥市西园新村小学": [117.2260, 31.8300],
        "天鹅湖体育公园": [117.2230, 31.8194],
        "合家福超市": [117.2240, 31.8209],
        "天鹅湖万达广场": [117.2307, 31.8250],
        "上铁银欣花园": [117.2077, 31.8271],
        "前城大厦": [117.2189, 31.8303]
    };
    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var geoCoord = geoCoordMap[data[i].name];
            if (geoCoord) {
                res.push({
                    name: data[i].name,
                    value: geoCoord.concat(data[i].value)
                });
            }
        }
        return res;
    };
    var em = document.getElementById("pointChart");
    var myChart = echarts.init(em);
    var pointOption = {
        legend: {
            data: ['需要改造', '不需要改造']
        },
        tooltip: {
            trigger: 'item',
            formatter: "{b}<br/>经纬度：{c}"
        },
        bmap: {
            center: [117.2354599503, 31.8268353637],
            zoom: 14,
            roam: true,
            mapStyle: {}
        },
        series: [
            {
                name: '需要改造',
                type: 'effectScatter',
                coordinateSystem: 'bmap',
                data: convertData(reformData),
                symbolSize: 20,
                showEffectOn: 'render',
                rippleEffect: {
                    brushType: 'stroke'
                },
                hoverAnimation: true,
                label: {
                    normal: {
                        formatter: '{b}',
                        position: 'right',
                        show: true
                    }
                },
                itemStyle: {
                    normal: {
                        color: 'red',
                        shadowBlur: 10,
                        shadowColor: '#333'
                    }
                },
                zlevel: 1
            },
            {
                name: '不需要改造',
                type: 'effectScatter',
                coordinateSystem: 'bmap',
                data: convertData(unReformData),
                symbolSize: 20,
                showEffectOn: 'render',
                rippleEffect: {
                    brushType: 'stroke'
                },
                hoverAnimation: true,
                label: {
                    normal: {
                        formatter: '{b}',
                        position: 'right',
                        show: true
                    }
                },
                itemStyle: {
                    normal: {
                        color: 'green',
                        shadowBlur: 10,
                        shadowColor: '#333'
                    }
                },
                zlevel: 1
            }
        ]
    };
    myChart.setOption(pointOption);
</script>
</body>
</html>
