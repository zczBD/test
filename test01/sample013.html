<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/echarts.js"></script>
    <script type="text/javascript" src="js/angular.min.js"></script>
    <script type="text/javascript" src="js/themes/dark.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap-theme.css"/>
    <title>echarts</title>
</head>

<body>
<div id="myEchart" style=" height: 600px;"></div>
<script type="text/jscript ">
			var em = document.getElementById('myEchart');
			var myChart = echarts.init(em, 'dark');
					
			option = {
				tooltip: {
					trigger: 'axis',
					axisPointer: {
						type: 'cross',
						label: {
							backgroundColor: '#283b56'
						}
					}
				},
				legend: {
					data: ['需求空缺bar', '需求空缺line','附近可调度车辆bar', '附近可调度车辆line']
				},
				
				dataZoom: {
					show: false,
					start: 0,
					end: 100
				},
				xAxis: [{
						type: 'category',
						name: '时间',
						boundaryGap: true,
						data: (function() {
							var now = new Date();
							var res = [];
							var len = 10;
							while(len--) {
								res.unshift(now.toLocaleTimeString().replace(/^\D*/, ''));
								now = new Date(now - 2000);
							}
							return res;
						})()
					}

				],
				yAxis: [{
					type: 'value',
					scale: true,
					name: '数量/万',
					max: 300,
					min: 0,
					boundaryGap: [0.2, 0.2]
				}],
				series: [{
						name: '需求空缺bar',
						type: 'bar',
						data: (function() {
							var res = [];
							var len = 10;
							while(len--) {
								res.push(Math.round(Math.random() * 100));
							}
							return res;
						})()
					},
					{
						name: '需求空缺line',
						type: 'line',
						data: (function() {
							var res = [];
							var len = 10;
							while(len--) {
								res.push(Math.round(Math.random() * 100));
							}
							return res;
						})()
					},
					{
						name: '附近可调度车辆bar',
						type: 'bar',
						xAxisIndex: 0,
						yAxisIndex: 0,
						data: (function() {
							var res = [];
							var len = 10;
							while(len--) {
								res.push(Math.round(Math.random() * 100));
							}
							return res;
						})()
					},
					{
						name: '附近可调度车辆line',
						type: 'line',
						data: (function() {
							var res = [];
							var len = 10;
							while(len--) {
								res.push(Math.round(Math.random() * 100));
							}
							return res;
						})()
					}
				]
			};

			myChart.setOption(option);
			
			var count = 11;
			setInterval(function() {
				axisData = (new Date()).toLocaleTimeString().replace(/^\D*/, '');
				var data0 = option.series[0].data;
				var data1 = option.series[1].data;
				var data2 = option.series[2].data;
				var data3 = option.series[3].data;
				data0.shift();
				var random0 = Math.round(Math.random() * 300);
				data0.push(random0);
				data1.shift();
				data1.push(random0);
				var random2 = Math.round(Math.random() * 300);
				data2.shift()
				data2.push(random2);
				data3.shift();
				data3.push(random2);
				option.xAxis[0].data.shift();
				option.xAxis[0].data.push(axisData);

				myChart.setOption(option);
			}, 2000);

</script>
</body>

</html>